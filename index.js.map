{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/render.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getNews(query, currentPage) {\n  const API_KEY = '81088765cb514a5b98c190ea1c6dabf9';\n  const BASE_URL = 'https://newsapi.org';\n  const END_POINT = '/v2/everything';\n\n  const url = `${BASE_URL}${END_POINT}`;\n\n  const params = {\n    apiKey: API_KEY,\n    q: query,\n    language: 'en',\n    sortBy: 'popularity',\n    pageSize: 10,\n    page: currentPage,\n  };\n  const resp = await axios.get(url, { params });\n  return resp.data;\n}\n","function cardTemplate(article) {\n  const { urlToImage, title, publisherdAt, content } = article;\n  return ` <li class='card'>\n      <img src=\"${urlToImage}\" alt=\"${title}\" class='img'/>\n      <h2>${title}</h2>\n      <h3>Date: ${publisherdAt}</h3>\n      <p>${content}</p>\n    </li>`;\n}\n\nexport function newsTemplate(articles) {\n  return articles.map(cardTemplate).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getNews } from './js/api';\nimport { newsTemplate } from './js/render';\n\nconst refs = {\n  formREf: document.querySelector('.js-form'),\n  galRef: document.querySelector('.js-gallery'),\n  moreRef: document.querySelector('.more'),\n  loaderRef: document.querySelector('.loader'),\n};\n\nlet query;\nlet page;\nlet lastPage;\n\nrefs.formREf.addEventListener('submit', onSubmit);\nrefs.moreRef.addEventListener('click', onMore);\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n  page = 1;\n  loaderOn();\n\n  query = ev.target.elements.query.value.trim();\n\n  if (!query) {\n    showError('No query!');\n    refs.galRef.innerHTML = '';\n    return;\n  }\n\n  try {\n    const data = await getNews(query, page);\n    if (data.totalResults === 0) {\n      showError('Sorry! No news for this query found.Try another search.');\n    }\n    lastPage = Math.ceil(data.totalResults / 10);\n    refs.galRef.innerHTML = '';\n    renderNews(data.articles);\n  } catch {\n    showError(data.message);\n    lastPage = 0;\n    refs.formREf.reset();\n    refs.galRef.innerHTML = '';\n  }\n  loaderOff();\n  checkMoreState();\n}\n\nasync function onMore(ev) {\n  ev.preventDefault();\n  page += 1;\n  loaderOn();\n  const data = await getNews(query, page);\n\n  renderNews(data.articles);\n  loaderOff();\n  checkMoreState();\n\n  refs.formREf.reset();\n\n  const height = refs.galRef.firstElementChild.getBoundingClientRect().height;\n\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\nfunction renderNews(articles) {\n  const markup = newsTemplate(articles);\n  refs.galRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showMore() {\n  refs.moreRef.classList.remove('hidden');\n}\n\nfunction hideMore() {\n  refs.moreRef.classList.add('hidden');\n}\n\nfunction checkMoreState() {\n  if (page >= lastPage) {\n    hideMore();\n  } else {\n    showMore();\n  }\n}\nfunction loaderOn() {\n  refs.loaderRef.classList.remove('hidden');\n}\n\nfunction loaderOff() {\n  refs.loaderRef.classList.add('hidden');\n}\nfunction showError(msg) {\n  iziToast.error({\n    title: 'Error!',\n    message: msg,\n    position: 'center',\n  });\n}\n"],"names":["getNews","query","currentPage","API_KEY","url","params","axios","cardTemplate","article","urlToImage","title","publisherdAt","content","newsTemplate","articles","refs","page","lastPage","onSubmit","onMore","ev","loaderOn","showError","data","renderNews","loaderOff","checkMoreState","height","markup","showMore","hideMore","msg","iziToast"],"mappings":"6vBAEO,eAAeA,EAAQC,EAAOC,EAAa,CAChD,MAAMC,EAAU,mCAIVC,EAAM,oCAENC,EAAS,CACb,OAAQF,EACR,EAAGF,EACH,SAAU,KACV,OAAQ,aACR,SAAU,GACV,KAAMC,CACV,EAEE,OADa,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACd,CCnBA,SAASE,EAAaC,EAAS,CAC7B,KAAM,CAAE,WAAAC,EAAY,MAAAC,EAAO,aAAAC,EAAc,QAAAC,CAAO,EAAKJ,EACrD,MAAO;AAAA,kBACSC,CAAU,UAAUC,CAAK;AAAA,YAC/BA,CAAK;AAAA,kBACCC,CAAY;AAAA,WACnBC,CAAO;AAAA,UAElB,CAEO,SAASC,EAAaC,EAAU,CACrC,OAAOA,EAAS,IAAIP,CAAY,EAAE,KAAK,EAAE,CAC3C,CCNA,MAAMQ,EAAO,CACX,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,OAAO,EACvC,UAAW,SAAS,cAAc,SAAS,CAC7C,EAEA,IAAId,EACAe,EACAC,EAEJF,EAAK,QAAQ,iBAAiB,SAAUG,CAAQ,EAChDH,EAAK,QAAQ,iBAAiB,QAASI,CAAM,EAE7C,eAAeD,EAASE,EAAI,CAO1B,GANAA,EAAG,eAAc,EACjBJ,EAAO,EACPK,IAEApB,EAAQmB,EAAG,OAAO,SAAS,MAAM,MAAM,OAEnC,CAACnB,EAAO,CACVqB,EAAU,WAAW,EACrBP,EAAK,OAAO,UAAY,GACxB,MACD,CAED,GAAI,CACF,MAAMQ,EAAO,MAAMvB,EAAQC,EAAOe,CAAI,EAClCO,EAAK,eAAiB,GACxBD,EAAU,yDAAyD,EAErEL,EAAW,KAAK,KAAKM,EAAK,aAAe,EAAE,EAC3CR,EAAK,OAAO,UAAY,GACxBS,EAAWD,EAAK,QAAQ,CAC5B,MAAU,CACND,EAAU,KAAK,OAAO,EACtBL,EAAW,EACXF,EAAK,QAAQ,QACbA,EAAK,OAAO,UAAY,EACzB,CACDU,IACAC,GACF,CAEA,eAAeP,EAAOC,EAAI,CACxBA,EAAG,eAAc,EACjBJ,GAAQ,EACRK,IACA,MAAME,EAAO,MAAMvB,EAAQC,EAAOe,CAAI,EAEtCQ,EAAWD,EAAK,QAAQ,EACxBE,IACAC,IAEAX,EAAK,QAAQ,QAEb,MAAMY,EAASZ,EAAK,OAAO,kBAAkB,sBAAuB,EAAC,OAErE,SAAS,CACP,SAAU,SACV,IAAKY,EAAS,CAClB,CAAG,CACH,CACA,SAASH,EAAWV,EAAU,CAC5B,MAAMc,EAASf,EAAaC,CAAQ,EACpCC,EAAK,OAAO,mBAAmB,YAAaa,CAAM,CACpD,CAEA,SAASC,GAAW,CAClBd,EAAK,QAAQ,UAAU,OAAO,QAAQ,CACxC,CAEA,SAASe,GAAW,CAClBf,EAAK,QAAQ,UAAU,IAAI,QAAQ,CACrC,CAEA,SAASW,GAAiB,CACpBV,GAAQC,EACVa,IAEAD,GAEJ,CACA,SAASR,GAAW,CAClBN,EAAK,UAAU,UAAU,OAAO,QAAQ,CAC1C,CAEA,SAASU,GAAY,CACnBV,EAAK,UAAU,UAAU,IAAI,QAAQ,CACvC,CACA,SAASO,EAAUS,EAAK,CACtBC,EAAS,MAAM,CACb,MAAO,SACP,QAASD,EACT,SAAU,QACd,CAAG,CACH"}